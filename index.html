<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div class="msg">{{ msg }}</div>
            <form action="/upload" method="POST" enctype="multipart/form-data">
                <label>Files: <input type='file' name='file[]' multiple='' required></label>
                <br><br>
                <input type='submit' value='UPLOAD'>
            </form>
      
</body>

</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/style.css"> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <title>Document</title>
</head>
<body> 
    
    <section id="sec-1">
        <dov class="container" >
            <div class="row"  >
                <div class="col-6 col-md-12" style="padding-left: 2%;font-family: Gotham Black;border-style: solid;"><h3  >Machine Learning Based Apporach For Hardware Faults Prediction</h3></div>
              </div>
              <div class="row">
                <div class="col-7 col-md-7" style="padding-left: 2%;padding-top: 2%;" ><p>This is mainly focusing on predicting the Output parameters of Analog and Mixed Signal Circuits Using Machine learning​.</p>
                    <p>
                    The sine waves are split into various process and the waveform is plotted using machine learning and  data analysis. It then proceeds with an algorithm model to predict the output.​
                    </p>
                    </div>
                <div class="col-1 col-md-1"><div class="vl"></div></div>
                <div class="col-4 col-md-4" style="align-items: center; padding-top: 10%;">
                    <a href="#sec-2">    <button type="button"  class="btn btn-dark">Start Testing </button>
                        </a>
                </div>
              </div>
           <!-- <div >
              <div class="wrapper">
                <button type="button" class="btn btn-primary btn-lg">Start</button>
            </div>
            </div> -->
<!-- <button class="button-73" style="align-items:center" role="button">Start</button> -->
 
            <a href="#sec-2"> 
        <div class="scroll-down"> </div>
        </a>
        </dov>
</section>
<section id="sec-2" >
    <div class="container">
<h3 >Choose What you want to test </h3> 
<hr style="border-top: 4px solid black">
<div class="row">
    <div class="col-12 col-md-12" style="padding-left: 2%;" > 
       <center><h5>Choose </h5></center>
       <hr>
     <center>  <select name="circuit-selection" class="dropdown" id="circuit">
        <option value="opampsine">Op-amp Sine</option>
        <option value="opampsquare">Op-amp Square</option>
        <option value="bandgap">Bandgap</option>
      </select>
    </center>
    <hr>
      <center><button type="submit" class="button button5" id="circuit-selection" >GO NEXT</button>  
          </center>
    </div>
    </div>
    
 
<a href="#sec-3" id="redirect1"> 
    <div class="scroll-down"> </div>
</a>
</div>
</section>
    <section id="sec-3" >
        <div class="container">
    <h3 >Upload Datasets</h3> 
  <hr style="border-top: 4px solid black">
        <br><br>
        <div class="row">
            <div class="col-6 col-md-12" style="padding-left: 2%;border-style: solid;" > <label>Files:   <input type="file" id="multiFiles" name="files[]" multiple="multiple" required/></label></div>
          </div>
     <br>
     <div id="loader-icon1"  style="display: none;"><center><img src="/static/images/loader.gif" /></center></div>
        <br>
        <div class="row">
            <div class="col-6 col-md-12" style="padding-left: 2;" > <center><button type="submit"  class="btn btn-dark" style="font-size: 30px;" value="UPLOAD" id="upload" >UPLOAD</button> </center> </div>
          </div>
          <br>
       
          <div class="row">
            <div class="col-6 col-md-12" style="padding-left: 2%;" > <p id="msg"></p> </div>
          </div>
     
    <a href="#sec-4" > 
        <div class="scroll-down"> </div>
        </a>
    </div>
    </section>
    <section id="sec-4">
      <div class="container">
  <h3>Preprocess the datasets</h3>
  <hr style="border-top: 4px solid black">
      <br>
 
      <div class="row">
        <div class="col-3 col-md-3" style="padding-left: 2%;" >  
        </div>
        <div class="col-6 col-md-6" style="padding-left: 2%;" >  
          <button type="submit"  class="btn btn-dark" style="width: 100%;" onclick="preprocess()">Preprocess Datasets</button><br><br>
          <a href="/displaypreprocessedfiles"><button style="width: 100%;"  type="submit"  class="btn btn-dark" onclick="">View Preprocessfiles</button></a><br><br>
          <button type="submit"  class="btn btn-dark" style="width: 100%;"   id="getcolumns">Go To Next Step</button>
        </div>
         <div class="col-3 col-md-3" style="padding-left: 2%;" >  
        </div>
      </div>
      <br>
        <br>
        <div id="loader-icon2"  style="display: none;"><center><img src="/static/images/loader.gif" /></center></div>
        <div class="row">
          <div class="col-6 col-md-12" style="padding-left: 2%;" > <p id="preprocessed"></p> </div>
        </div>
   
     <a id="section-calling1" href="#sec-5" > 
      <div class="scroll-down"> </div>
      </a>
  </div>
  </section>
  <section id="sec-5" style="display: none;">
    <div class="container">
    <h3>Region Split</h3>
    <hr style="border-top: 4px solid black">
      <br>
 
         <div class="row">
          <div class="col-6 col-md-6" style="padding-left: 2%;" >
            <button type="submit"  class="btn btn-dark" onclick="split5()">Split Dataset</button>
          </div>
         
          </div>
          <br>
          <br>
          <div id="loader-icon3"  style="display: none;"><center><img src="/static/images/loader.gif" /></center></div>
        <br>
        <div class="row">
          <div class="col-6 col-md-12" style="padding-left: 2%;" > <p id="splitted"></p> </div>
        </div>
   <a href="#sec-6"> 
    <div class="scroll-down"> </div>
    </a>
</div>
</section>
    <section id="sec-6">
      <div class="container">
            <h3>Train</h3>
        <hr style="border-top: 4px solid black">
        <div class="row" id="region-select-block-id" style="display: none;" >
            <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Choose Region:</h7>
            </div>
            <div class="col-8 col-md-8" style="padding-left: 2%;" >  
                <select class="dropdown" name="region-select" style="background-color: black;color:white" id="region-select">
                    <option value="functional">Functional</option>
                    <option value="rise1">Rise1</option>
                    <option value="rise2">Rise2</option>
                    <option value="rise3">Rise3</option>
                   
                    <option value="transient1">Transient1</option>
                    <option value="lstm">Fall</option>
                  </select>
            </div>
        </div>
        
        <div class="row"  >
            <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Choose Process:</h7>
            </div>
            <div class="col-8 col-md-8" style="padding-left: 2%;" >  
                <select class="dropdown" name="process-select" style="background-color: black;color:white" id="process-select">
                    <option vaues="overall">Overall</option>
                    <option value="fastfast">Fast-Fast</option>
                    <option value="fastslow">Fast-Slow</option>
                    <option value="slowslow">Slow-Slow</option>
                    <option value="slowfast">Slow-Fast</option>
                    <option value="typical">Typical</option>
                    
                  </select>
            </div>
            <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Choose inputs:</h7>
            </div>
            
            <div class="col-8 col-md-8" style="padding-left: 2%;"  >  
                <button class="chooseinput" id="chooseinput" >Choose inputs</button>
                <div id="inputs" class="display_block"></div>
               
            </div>
            <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Choose output:</h7>
              </div>
              <div class="col-8 col-md-8" style="padding-left: 2%;"  >  
                <button class="chooseoutput" id="chooseoutput" >Choose output</button>
                <div id="output" class="display_block_output"></div>
               
            </div>
              <!-- <div class="5ol-8 col-md-8" style="padding-left: 2%;" >  
                <input type="radio" id="" name="fav_language" value="vinn">
                <label for="html">Vinn</label>
                <input type="radio" id="" name="fav_language" value="vreference">
                <label for="css">Vref</label>
             </div> -->
             <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Choose Model:</h7>
            </div>
            <div class="col-8 col-md-8" style="padding-left: 2%;" >  
                <select class="dropdown" name="modals" style="background-color: black;color:white" id="modals">
                    <option value="mlp">MLP</option>
                    <option value="lstm_with_sequence">LSTM With Sequence</option>
                    <option value="lstm_wihtout_sequence">LSTM Without Sequence</option>
                    <option value="random_forest">Random Forest</option>
                  </select>

            </div>
        <!-- <div id="linearalgos" style="display: block;"> -->
             <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Neurons Layer1</h7>
            </div>
            <div class="col-8 col-md-8" style="padding-left: 2%;" >  
                <input type="text"  class="input-textbox" name="layer1-neuron" id="layer1neuron" value="32">
            </div>
            <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Neurons Layer2</h7>
            </div>
            <div class="col-8 col-md-8" style="padding-left: 2%;" >  
                <input type="text"  class="input-textbox" name="layer2-neuron"  id="layer2neuron" value="16">
            </div>
            <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Neurons Layer3</h7>
            </div>
            <div class="col-8 col-md-8" style="padding-left: 2%;" >  
                <input type="text"  class="input-textbox" name="layer3-neuron" id="layer3neuron" value="1">
            </div>
            <div class="col-4 col-md-4" style="padding-left: 2%;" > 
                <h7>Choose Epochs</h7>
            </div>
            <div class="col-8 col-md-8" style="padding-left: 2%;" >  
                <input type="text"  class="input-textbox" name="epochs" id="epochs" value="">
            </div>
         <!-- </div> -->
            <div class="col-4 col-md-4" style="padding-left: 2%;" > 
            </div>
            <div class="col-8 col-md-8" style="padding-left: 2%;" >  
                <hr>
                  <button type="submit" class="button button5"  style="width: 50%;"  onclick="concatenate()" >Train</button>
            </div> 

     </div>

        </div>
        <br>
        <br>
        <!-- <div class="row">
            <div class="col-6 col-md-4" style="padding-left: 2%;" >  
                <button type="submit"  class="btn btn-dark" onclick="timesplit()">Timesplit</button>
              </div>
         <div class="col-6 col-md-4" style="padding-left: 2%;" >  
            <button type="submit"  class="btn btn-dark" onclick="truncate()">Truncate</button>
          </div>
           <div class="col-6 col-md-4" style="padding-left: 2%;" >  
            <button type="submit"  class="btn btn-dark" onclick="concatenate()">Concatenate</button>
          </div>
          </div> -->
         
          <!-- <div class="row">
            <div class="col-5 col-md-5" style="padding-left: 2%;" >  
              </div>
         <div class="col-5 col-md-4" style="padding-left: 2%;" >  
            <button type="submit" class="button button5"  style="width: 50%;" class=" onclick="train()">Train</button> 
          </div>
           <div class="col-4 col-md-4" style="padding-left: 2%;" > 
          </div>
          </div> -->
          <div class="row">
            <div class="col-6 col-md-12" style="padding-left: 2%;" > <p id="status"></p> </div>
          </div>
          <div id="loader-icon4"  style="display: none;"><center><img src="/static/images/loader.gif" /></center></div>
  <!-- <a href="#sec-7"> 
      <div class="scroll-down"> </div>
      </a> -->
  </div>
</section>           
<section id="sec-7">
    <div class="container">
<h4>Test</h4>
<hr style="border-top: 4px solid black">
    <div class="row">
        <div class="col-4 col-md-4" style="padding-left: 2%;" > 
            <h7>Choose Testing</h7>
        </div>
        <div class="col-4 col-md-4" style="padding-left: 2%;" >  
            <select class="dropdown" style="width:100%" name="test-select" style="background-color: black;color:white" id="test-select">
                <option value="manual">Manual Testing</option>
                <option value="auto">Automatic Testing</option>
              </select>
        </div>
        <!-- <div class="col-4 col-md-4" style="padding-left: 2%;" > 
              <button type="submit" class="button button5" id="test-button" style="width: 100%;height:55px;font-size: 20px;"  >Proceed</button>
        </div> -->
     </div>
     <hr>
        <div class="row">
        <div class="col-6 col-md-6" id="automatic-test" style="display: block;"  >  
            <h9>Automatic Testing</h9>
            <hr>
        
            <button type="submit" class="button button5" style='width:60%;font-size: 24px;'onclick="test()">Test</button>
        </div>
        <div class="col-6 col-md-6" id="manual-test" style="display: block;" >  
            <h9>Custom Testing</h9>
            <hr>
            <label>Files:   <input type="file" id="testtFiles" name="files[]" multiple="multiple" required/></label>
            <hr>
             <button type="submit"  class="button button5" value="UPLOAD"  id="upload2"  >Upload</button>
              <button type="submit"  class="button button5" onclick="customtest()">Test</button> 
        </div>
      </div>
       <br>
       <div id="loader-icon5"  style="display: none;"><center><img src="/static/images/loader.gif" /></center></div>
        <div class="row">
            <div class="col-6 col-md-12" style="padding-left: 2%;" > <p id="test"></p> </div>
          </div>
      <br>
  
     
<a href="#sec-8"> 
    <div class="scroll-down"> </div>
    </a>

</div>
</section>
<section id="sec-7">
    <div class="container">
<h3>Results</h3>
<hr style="border-top: 4px solid black">
      <div class="row">
          <div class="col-6 col-md-4" style="padding-left: 2%;" >  
          </div>
          <div class="col-6 col-md-4" style="padding-left: 2%;" >
            <button type="submit"  class="btn btn-dark" onclick="get_result()">Generate Results</button>
          </div>
           <div class="col-6 col-md-4" style="padding-left: 2%;" >  
          </div>
        </div>
        <br>
        <!-- <img src="" id="img1" > 
        <img src="" id="img2" > 
        <img src="" id="img3" > 
        <img src="" id="img4" > 
        <img src="" id="img5" > 
        <img src="" id="img6" >  -->
        <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >  
               <img src="" id="img1" > 
              <center><p id="img1text" style="font-size:20px;font-weight: bold;"></p></center>
            </div>
            </div>
            <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >
                <img src="" id="img2" > 
                <center>  <p id="img2text"></p></center>
            </div>
            </div>
          <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >  
               <img src="" id="img3" > 
               <center>   <p id="img3text"></p></center>
            </div>
            </div>
            <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >
                <img src="" id="img4" > 
                <center>   <p id="img4text"></p></center>
            </div>  
          </div>
          <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >  
               <img src="" id="img5" > 
               <center> <p id="img5text"></p></center>
            </div>
            </div>
            <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >
                <img src="" id="img6" > 
                <center>  <p id="img6text"></p></center>
            </div>  
          </div>
          <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >  
               <img src="" id="img7" >
               <center> <p id="img7text"></p>  </center>
            </div>
            </div>
            <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >
                <img src="" id="img8" >
               <center><p id="img8text"></p> </center>
            </div>  
          </div>
          <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >  
               <img src="" id="img9" >
            <center>  <p id="img9text"></p> </center>
            </div>
            </div>
            <div class="row">
            <div class="col-12 col-md-12" style="padding-left: 2%;" >
                <img src="" id="img10" >
              <center><p id="img10text"></p> </center>
            </div>  
          </div>
          <br>
          <div id="loader-icon6"  style="display: none;"><center><img src="/static/images/loader.gif" /></center></div>
      <br>
</div>
</section>

    <script>
        //var array=["tempature","vdd","vinp","vinn"];
        var inputid= document.getElementById("inputs");
       var outputid=document.getElementById("output");
       var chooseoutput=document.querySelector("#chooseoutput");
        var chooseinput=document.querySelector("#chooseinput");
        // var modal =document.getElementById("modals").value;
        // var linearalgos_id=document.querySelector("#linearalgos");
        // if(modal=="random_forest")
        // {
        //     linearalgos_id.style.display="none";
        // }
        // else{
        //     linearalgos_id.style.display="block";
        // }
      //  var prompt=document.querySelector(".prompt");
        
        chooseinput.addEventListener('click',function(){
            if(chooseinput.innerText==="Choose inputs")
            {
                inputid.style.display="block";
                chooseinput.innerText="Close";
            }
            else if(chooseinput.innerText==="Close")
            {
                inputid.style.display="none";
                chooseinput.innerText="Choose inputs";
            }
        });
        
        // prompt.addEventListener("click",function(e){
        //     if(e.target.id="close")
        //     {
        //         prompt.style.display="none";
        //     }
        // });
       
       chooseoutput.addEventListener('click',function(){
            console.log(chooseoutput);
            if(chooseoutput.innerText==="Choose output")
            {
                outputid.style.display="block";
                chooseoutput.innerText="Close";
            }
            else if(chooseoutput.innerText==="Close")
            {
                outputid.style.display="none";
                chooseoutput.innerText="Choose output";
            }
        });
       
        var circuit;
        var testtype;
         $(document).ready(function (e) {
            $('#getcolumns').on('click',function(){
                $.ajax({
                    url: '/getcolumns', // point to server-side URL
                    dataType: 'json', // what to expect back from server
                    type: 'post',
                    success: function (response) { // display success response
                        console.log(response);
                        response.array.forEach(element => {
                        inputid.innerHTML+=`<input type="checkbox" id="${element}" name="checkedinputs" value="${element}" class="check-box" > ${element}</input><br>`;
                        });  
                        response.array.forEach(element => {
                        outputid.innerHTML+=`<input type="radio" id="clickedoutput"  name="checkedoutputs" value="${element}"> <label for="html">${element}</label><br>`;
                        });       
                        window.location=document.getElementById('section-calling1').href;
                    },
                    error: function (response) {
                       // display error response
                    }
                });
            
            });
           
            $('#test-button').on('click', function () {
            testtype=document.getElementById("test-select").value;
            if(testtype="auto")
            { 
                document.getElementById('automatic-test').style.display='block';
                document.getElementById('manual-test').style.display = 'none';
            }
            else if("manual"){
                document.getElementById('automatic-test').style.display='none';
                document.getElementById('manual-test').style.display = 'block';  
            }
            });
            $('#circuit-selection').on('click', function () {
            circuit=document.getElementById("circuit").value;
            $.ajax({
                    url: '/selectcircuit', // point to server-side URL
                    dataType: 'json', // what to expect back from server
                    data: {'circuit':circuit},
                    type: 'post',
                    success: function (response) { // display success response
                        console.log(response.message);
                        if(circuit=="opampsine")
                        {
                        //    $('#sec-calling2').replaceWith("<a id='sec-calling2' href='#sec-4' > <div class='scroll-down'> </div></a>");  
                            $('#sec-calling1').replaceWith("<a id='sec-calling1' href='#sec-5' > <div class='scroll-down'> </div></a>");  
                            document.getElementById('region-select-block-id').style.display='block';
                        
                            document.getElementById('sec-5').style.display = 'block';
                        }
                        else{
                        //  $('#sec-calling2').replaceWith("<a id='sec-calling2' href='#sec-4' > <div class='scroll-down'> </div></a>");  
                            $('#section-calling1').replaceWith("<a id='section-calling1' href='#sec-6' > <div class='scroll-down'> </div></a>");
                            document.getElementById('region-select-block-id').style.display='none';
                            
                            document.getElementById('sec-5').style.display = 'none';
                        }
                        window.location=document.getElementById('redirect1').href;
                    },
                    error: function (response) {
                       // display error response
                    }
                });
            
            });
        });


 $(document).ready(function (e) {
            $('#upload').on('click', function () {
                var form_data = new FormData();
                console.log("upload")
                var ins = document.getElementById('multiFiles').files.length;
                document.getElementById('loader-icon1').style.display = 'block';
                if(ins == 0) {
                    $('#msg').html('<span style="color:red">Select at least one file</span>');
                    return;
                }                 
                for (var x = 0; x < ins; x++) {
                    form_data.append("files[]", document.getElementById('multiFiles').files[x]);
                }
                $.ajax({
                    url: '/upload', // point to server-side URL
                    dataType: 'json', // what to expect back from server
                    cache: false,
                    contentType: false,
                    processData: false,
                    data: form_data,
                    type: 'post',
                    success: function (response) { // display success response
                        document.getElementById('loader-icon1').style.display = 'none';
                        $('#msg').html('');
                        $.each(response, function (key, data) {                         
                            if(key !== 'message') {
                                $('#msg').append(key + ' -> ' + data + '<br/>');
                            } else {
                                $('#msg').append(data + '<br/>');
                            }
                        })
                    },
                    error: function (response) {
                        $('#msg').html(response.message); // display error response
                    }
                });
            });
        });


     //   function upload_datasets()
    //  {
    //     console.log("sd");
    //     var data = new FormData();
    //     console.log(document.getElementById('Datasets').files.length);
    //     for( var i = 0, len = document.getElementById('Datasets').files.length; i < len; i++ ){
    //     data.append( "files" + i, document.getElementById('Datasets').files[i] );
    //      }
    //      console.log(data);
    //     $.ajax({
    //     url:'/upload',
    //       type:"POST",
    //       data:data,
    //       processData:false,
    //       contentType:false,
    //       success:function(data){
    //       console.log('yes');
    //       console.log(data);    
    //     },
    //       crossDomain:true
    //     });
    //     }
       function preprocess()
       {
        document.getElementById('loader-icon2').style.display = 'block';
            $.ajax({
                type: "post",
                url: "/preprocessdataset",
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                    
                    if(data.message== "preprocess sucessed"){
                        //disableSubmit();
                        document.getElementById('loader-icon2').style.display = 'none';
                        document.getElementById("preprocessed").innerHTML = "Preprocessed successfully";

                    //document.getElementById("message1").innerHTML = data.message;
                }
            }
        });
       }
       function split5()
       {
        document.getElementById('loader-icon3').style.display = 'block';
            $.ajax({
                type: "post",
                url: "/splitdataset",
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                    if(data.message=="splitted sucessed"){
                        document.getElementById('loader-icon3').style.display = 'none';
                        //disableSubmit();
                        document.getElementById("splitted").innerHTML = "splitted successfully";

                    //document.getElementById("message1").innerHTML = data.message;
                      }
                     
            }
        });
       }
       var region=''
       var model=''
       var process=''
       function timesplit()
       {
        document.getElementById('loader-icon4').style.display = 'block';
            model=document.getElementById("modals").value;
            if(circuit == "opampsine")
            {
            region=document.getElementById("region-select").value;
            }
            process=document.getElementById("process-select").value
            console.log(model);
            $.ajax({
                type: "post",
                url: "/timesplit",
                data:{'model':model,"region":region,'process':process},
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                   
                    if(data.message=="timesplit done"){
                        //disableSubmit();
                        document.getElementById('loader-icon4').style.display = 'none';
                        document.getElementById("status").innerHTML = "splitted successfully";

                    //document.getElementById("message1").innerHTML = data.message;
                }
            }
             }); 
       }
       function truncate()
       {
        document.getElementById('loader-icon4').style.display = 'block';
        model=document.getElementById("modals").value;
            if(circuit == "opampsine")
            {
            region=document.getElementById("region-select").value;
            }
            process=document.getElementById("process-select").value
        $.ajax({
                type: "post",
                url: "/truncate",
                data:{'model':model,"region":region,'process':process},
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                    if(data.message=="truncated successfully") {
                        //disableSubmit();
                        document.getElementById('loader-icon4').style.display = 'none';
                        document.getElementById("status").innerHTML = "truncated successfully";
                }
            }
        });
        
        
       }
       function concatenate()
       {
        document.getElementById('loader-icon4').style.display = 'block'; 
        model=document.getElementById("modals").value;
            if(circuit == "opampsine")
            {
            region=document.getElementById("region-select").value;
            }
            process=document.getElementById("process-select").value  
            console.log("concatenate");
        $.ajax({
                type: "post",
                url: "/concatenate",
                data:{'model':model,"region":region,'process':process},
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                   if(data.message=="concatenated successfully") {
                        //disableSubmit();
                        document.getElementById('loader-icon4').style.display = 'none';
                        document.getElementById("status").innerHTML = "concatenated successfully";
                }
            }
        });
       }
       var output=''
       const inputs=[]
       function train()
       {
        //    timesplit();
        //    truncate();
        //    concatenate();
        
            model=document.getElementById("modals").value;
            if(circuit == "opampsine")
            {
            region=document.getElementById("region-select").value;
            }
            process=document.getElementById("process-select").value  
            console.log("train");
            // var ckbox = $("input[name='checkedinputs']");
            // console.log(ckbox)
            const inputs=[]
            var markedCheckbox = document.getElementsByName('checkedinputs');  
            for (var checkbox of markedCheckbox) {  
                if (checkbox.checked)  
                //console.log(checkbox.value + ' ');
                inputs.push(checkbox.value);  
            }  
            
            console.log(inputs);
            output = $("input:radio[name=checkedoutputs]:checked").val()
            console.log(output)
            layer1neuronvalue=document.getElementById("layer1neuron").value;
            layer2neuronvalue=document.getElementById("layer2neuron").value;
            layer3neuronvalue=document.getElementById("layer3neuron").value;
            epochs=document.getElementById("epochs").value;
            document.getElementById('loader-icon4').style.display = 'block';
        // if(model=="mlp")
        // {
        $.ajax({
                type: "post",
                url: "/mlptrain",
                data:{'inputs':inputs,'outputs':output,'model':model,"region":region,"process":process,"layer1neuronvalue":layer1neuronvalue,"layer2neuronvalue":layer2neuronvalue,"layer3neuronvalue":layer3neuronvalue,"epochs":epochs},
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                   if(data.message=="trained successfully") {
                        //disableSubmit();
                        document.getElementById('loader-icon4').style.display = 'none';
                        document.getElementById("status").innerHTML = "Dataset trained sucessfully";
                }
            }
        });
      // }
    //    else if(model=="lstm")
    //    {
    //     $.ajax({
    //             type: "post",
    //             url: "/lstmtrain",
    //             success: function (data) {
    //                 console.log("entered");
    //                 console.log(data.message);
    //                if(data.message=="trained successfully"){
    //                     //disableSubmit();
    //                     document.getElementById('loader-icon4').style.display = 'none';
    //                     document.getElementById("status").innerHTML = "Dataset trained sucessfully";
    //             }
    //         }
    //    });
    //  }
} 
function test()
{
    model=document.getElementById("modals").value;
            if(circuit == "opampsine")
            {
            region=document.getElementById("region-select").value;
            }
            process=document.getElementById("process-select").value  
            console.log("train");
    document.getElementById('loader-icon5').style.display = 'block';
    if(model=="mlp")
    {
        $.ajax({
                type: "post",
                url: "/mlptest",
                data: {'inputs':inputs,'outputs':output,'model':model,"region":region,"process":process},
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                    if(data.message=="tested successfully"){
                        document.getElementById('prediction').style.display = 'block';
                        document.getElementById('loader-icon5').style.display = 'none';
                        //disableSubmit();
                        document.getElementById("status").innerHTML = "Dataset tested sucessfully";
                }
            }
       });
    }   
    else if(model=="lstm")
    {
        $.ajax({
                type: "post",
                url: "/lstmtest",
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                    if(data.message=="tested successfully") {
                        document.getElementById('loader-icon5').style.display = 'none';

                        document.getElementById('prediction').style.display = 'block';
                        //disableSubmit(); 
                        document.getElementById("test").innerHTML = "Dataset tested sucessfully";
                }
            }
       });
    }
}
function get_result()
{
    document.getElementById('loader-icon6').style.display = 'block';
    var model=document.getElementById("models").value;  
    if(model=="mlp")
    {
        $.ajax({
                type: "post",
                url: "/mlpwaveforms",
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                    if(data.message=="waveforms getting successfully") {
                        document.getElementById('loader-icon6').style.display = 'none';
                        $('#img1').replaceWith("<img src='"+data.url+data.files[0]+"' id='img1' style='width: 100%;height:400px;'> ");
                        $('#img2').replaceWith("<img src='"+data.url+data.files[1]+"' id='img2' style='width: 100%;height:400px;'>");
                        $('#img3').replaceWith("<img src='"+data.url+data.files[2]+"' id='img3' style='width: 100%;height:400px;'> ");
                        $('#img4').replaceWith("<img src='"+data.url+data.files[3]+"' id='img4' style='width: 100%;height:400px;'> ");
                        $('#img5').replaceWith("<img src='"+data.url+data.files[4]+"' id='img5' style='width: 100%;height:400px;'> ");
                        $('#img6').replaceWith("<img src='"+data.url+data.files[5]+"' id='img6' style='width: 100%;height:400px;'> ");
                        $('#img1text').replaceWith("<p id='img1text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[0] +"<br> R2score :"+ data.r2score[0]+"<br> MAE:"+ data.mae[0]+"<br> MSE :"+ data.mse[0]+"</p>");
                        $('#img2text').replaceWith("<p id='img2text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[1] +"<br> R2score :"+ data.r2score[1]+"<br> MAE:"+ data.mae[1]+"<br> MSE :"+ data.mse[1]+"</p>");
                        $('#img3text').replaceWith("<p id='img3text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[2] +"<br> R2score :"+ data.r2score[2]+"<br> MAE:"+ data.mae[2]+"<br> MSE :"+ data.mse[2]+"</p>");
                        $('#img4text').replaceWith("<p id='img4text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[3] +"<br> R2score :"+ data.r2score[3]+"<br> MAE:"+ data.mae[3]+"<br> MSE :"+ data.mse[3]+"</p>");
                        $('#img5text').replaceWith("<p id='img5text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[4] +"<br> R2score :"+ data.r2score[4]+"<br> MAE:"+ data.mae[4]+"<br> MSE :"+ data.mse[4]+"</p>");
                        $('#img6text').replaceWith("<p id='img6text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[5] +"<br> R2score :"+ data.r2score[5]+"<br> MAE:"+ data.mae[5]+"<br> MSE :"+ data.mse[5]+"</p>");
                       
                }
            }
       });
    }   
    else if(model=="lstm")
    {
        $.ajax({
                type: "post",
                url: "/lstmwaveforms",
                success: function (data) {
                    console.log("entered");
                    console.log(data.message);
                    if(data.message=="waveforms getting successfully") {
                        //disableSubmit();   
                        document.getElementById('loader-icon6').style.display = 'none';
                        $('#img1').replaceWith("<img src='"+data.url+data.files[0]+"' id='img1' style='width: 100%;height:400px;'> ");
                        $('#img2').replaceWith("<img src='"+data.url+data.files[1]+"' id='img2' style='width: 100%;height:400px;'>");
                        $('#img3').replaceWith("<img src='"+data.url+data.files[2]+"' id='img3' style='width: 100%;height:400px;'> ");
                        $('#img4').replaceWith("<img src='"+data.url+data.files[3]+"' id='img4' style='width: 100%;height:400px;'> ");
                        $('#img5').replaceWith("<img src='"+data.url+data.files[4]+"' id='img5' style='width: 100%;height:400px;'> ");
                        $('#img6').replaceWith("<img src='"+data.url+data.files[5]+"' id='img6' style='width: 100%;height:400px;'> ");
                        $('#img7').replaceWith("<img src='"+data.url+data.files[6]+"' id='img7' style='width: 100%;height:400px;'> ");
                        $('#img8').replaceWith("<img src='"+data.url+data.files[7]+"' id='img8' style='width: 100%;height:400px;'> ");
                        $('#img9').replaceWith("<img src='"+data.url+data.files[8]+"' id='img9' style='width: 100%;height:400px;'> ");
                        $('#img10').replaceWith("<img src='"+data.url+data.files[9]+"' id='img10' style='width: 100%;height:400px;'> ");
                        $('#img1text').replaceWith("<p id='img1text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[0] +"<br> R2score :"+ data.r2score[0]+"<br> MAE:"+ data.mae[0]+"<br> MSE :"+ data.mse[0]+"</p>");
                        $('#img2text').replaceWith("<p id='img2text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[1] +"<br> R2score :"+ data.r2score[1]+"<br> MAE:"+ data.mae[1]+"<br> MSE :"+ data.mse[1]+"</p>");
                        $('#img3text').replaceWith("<p id='img3text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[2] +"<br> R2score :"+ data.r2score[2]+"<br> MAE:"+ data.mae[2]+"<br> MSE :"+ data.mse[2]+"</p>");
                        $('#img4text').replaceWith("<p id='img4text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[3] +"<br> R2score :"+ data.r2score[3]+"<br> MAE:"+ data.mae[3]+"<br> MSE :"+ data.mse[3]+"</p>");
                        $('#img5text').replaceWith("<p id='img5text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[4] +"<br> R2score :"+ data.r2score[4]+"<br> MAE:"+ data.mae[4]+"<br> MSE :"+ data.mse[4]+"</p>");
                        $('#img6text').replaceWith("<p id='img6text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[5] +"<br> R2score :"+ data.r2score[5]+"<br> MAE:"+ data.mae[5]+"<br> MSE :"+ data.mse[5]+"</p>");
                        $('#img7text').replaceWith("<p id='img7text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[6] +"<br> R2score :"+ data.r2score[6]+"<br> MAE:"+ data.mae[6]+"<br> MSE :"+ data.mse[6]+"</p>");
                        $('#img8text').replaceWith("<p id='img8text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[7] +"<br> R2score :"+ data.r2score[7]+"<br> MAE:"+ data.mae[7]+"<br> MSE :"+ data.mse[7]+"</p>");
                        $('#img9text').replaceWith("<p id='img9text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[8] +"<br> R2score :"+ data.r2score[8]+"<br> MAE:"+ data.mae[8]+"<br> MSE :"+ data.mse[8]+"</p>");
                        $('#img10text').replaceWith("<p id='img10text' style='font-size:20px;font-weight: bold;width:100%;'>Name:"+data.name[9] +"<br> R2score :"+ data.r2score[9]+"<br> MAE:"+ data.mae[9]+"<br> MSE :"+ data.mse[9]+"</p>");
                }
            }
       });
    }
}      
$(document).ready(function (e) {
            $('#upload2').on('click', function () {
                var form_data = new FormData();
                console.log("upload2")
                var ins = document.getElementById('testFiles').files.length;
                document.getElementById('loader-icon5').style.display = 'block';              
                for (var x = 0; x < ins; x++) {
                    form_data.append("files[]", document.getElementById('testFiles').files[x]);
                }
                $.ajax({
                    url: '/uploadtestdataset', // point to server-side URL
                    dataType: 'json', // what to expect back from server
                    cache: false,
                    contentType: false,
                    processData: false,
                    data: form_data,
                    type: 'post',
                    success: function (response) { // display success response
                        $('#msg').html('');
                       document.getElementById('loder-icon1').style.display = 'none';
                        $.each(response, function (key, data) {                         
                            if(key !== 'message') {
                                $('#msg').append(key + ' -> ' + data + '<br/>');
                            } else {
                                $('#msg').append(data + '<br/>');
                            }
                        })
                    },
                    error: function (response) {
                        $('#msg').html(response.message); // display error response
                    }
                });
            });
        });
    </script>
    
</body>
</html>
